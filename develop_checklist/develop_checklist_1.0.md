# Electron 应用开发计划表

备注：DeepSeek 的文档地址：https://www.deepseek.com/docs/

## 项目初始化
- [x] 创建项目目录并初始化 npm 项目
- [x] 安装 Node.js 和 Electron
  - Node.js 版本: 18.16.1
  - npm 版本: 9.5.1

## UI 设计
- [x] 设计主窗口 (MainWindow.xaml)
  - [x] 添加输入文本框
  - [x] 添加发送按钮
  - [x] 添加聊天历史显示区域
  - [x] 优化窗口尺寸和布局
    - [x] 设置合适的默认窗口大小
    - [x] 添加最小窗口尺寸限制
    - [x] 使用 flex 布局实现自适应
    - [x] 优化内容间距和滚动条

## 功能实现
- [x] 实现与 AI 的对话功能
  - [x] 在 `index.html` 中编写 JavaScript 处理发送按钮点击事件
  - [x] 使用 HttpClient 发送请求到 AI 服务
  - [x] 处理并显示 AI 的响应
  - [x] 停止 AI 回答功能
    - [x] 添加停止按钮
    - [x] 添加停止图标
    - [x] 优化按钮样式和交互
    - [x] 优化按钮显示逻辑
      - [x] 仅在 AI 回答时显示
      - [x] 中止后显示提示信息
      - [x] 确保按钮状态同步
    - [x] 实现请求中止功能
    - [x] 按钮状态管理
    - [x] 错误处理
  - [x] 实现对话历史记录功能
    - [x] 维护消息历史数组
    - [x] 在请求中包含历史消息
    - [x] 添加清除历史功能
    - [x] 优化 API 参数配置
  - [x] 实现流式输出，AI 回答时显示打字效果
  - [x] 主题切换功能
    - [x] 添加暗夜模式/白天模式切换开关
    - [x] 实现主题样式切换
    - [x] 保存主题设置到本地存储
    - [x] 所有界面元素适配暗夜模式
    - [x] 完整的暗夜模式支持
      - [x] 窗口标题栏暗色适配
      - [x] 全局滚动条暗色样式
      - [x] 窗口边框颜色同步
    - [x] 设置界面主题同步
      - [x] 实现设置界面暗夜模式样式
      - [x] 与主界面主题状态同步
      - [x] 窗口间主题切换消息通信
  - [x] 优化链接处理
    - [x] 使用外部浏览器打开链接
    - [x] 防止链接覆盖主界面

## 设置界面功能
- [x] API Key 管理
  - [x] 显示当前 API Key
  - [x] 提供 API Key 输入框和保存功能
  - [x] API Key 测试功能
  - [x] 显示测试结果和错误信息
- [x] 设置界面集成优化
  - [x] 改为侧边栏滑出式设计
  - [x] 与主界面共享窗口和主题
  - [x] 平滑的过渡动画效果
  - [x] 点击外部自动关闭
- [x] 快捷键管理
  - [x] 显示当前快捷键
  - [x] 使用下拉框组件实现快捷键选择
    - [x] 预设常用快捷键组合
    - [x] 下拉框实时响应选择变更
  - [x] 实时更新快捷键设置
- [x] 配置文件管理
  - [x] 保存设置到配置文件
  - [x] 启动时自动加载配置
  - [x] 正确处理配置文件读写错误
  - [x] 显示配置文件的绝对路径
  - [x] 添加打开配置文件路径功能
    - [x] 实现打开文件所在目录
    - [x] 添加操作反馈提示

## 样式优化
- [x] API KEY 设置界面的高、宽能够根据里面的内容自适应。要确保能够显示所有内容，不要有滚动条
- [x] API KEY 设置界面隐藏菜单栏，不要有file、edit、view、help等菜单
- [x] 输入框按enter就能提交
- [x] 聊天界面样式美化
  - [x] 用户消息使用圆角边框和特殊背景色
  - [x] AI 消息使用左边框样式
  - [x] 优化整体界面布局和配色
  - [x] 添加交互动画效果
  - [x] 添加背景图片
    - [x] 设置全屏背景图
    - [x] 添加半透明遮罩层
    - [x] 适配暗夜模式
- [x] API KEY 设置界面布局优化
  - [x] 合理的输入框大小和间距
  - [x] 清晰的标签和提示文本
  - [x] 按钮样式统一
  - [x] 侧边栏式布局设计
    - [x] 滑动式显示/隐藏
    - [x] 半透明遮罩效果
    - [x] 适配暗夜模式
  - [x] 消息提示优化
    - [x] 浮动消息提示
    - [x] 自动消失效果
    - [x] 动画过渡效果
  - [x] 现代化界面设计
    - [x] 卡片式容器布局
    - [x] 优化的输入控件样式
    - [x] 统一的颜色方案
    - [x] 添加过渡动画效果
- [x] 主题切换样式
  - [x] 美化的滑动开关设计
  - [x] 添加主题图标标识
    - [x] 添加日/夜模式图标
    - [x] 图标颜色主题适配
  - [x] 暗夜模式配色方案
  - [x] 平滑的切换动画
  - [x] AI 回答样式优化
    - [x] 代码块暗色主题
    - [x] 代码语法高亮
      - [x] 集成 highlight.js
      - [x] 自动识别代码语言
      - [x] 主题切换自动适配
    - [x] 行内代码样式调整
    - [x] 链接和标题颜色优化
    - [x] 滚动条暗色适配

## 想法
- [x] 程序能够挂在后台，在windows的任务栏显示小图标
  - [x] 实现系统托盘图标显示
  - [x] 添加托盘右键菜单（显示/退出）
  - [x] 点击托盘图标切换主窗口显示/隐藏
  - [x] 点击窗口关闭按钮时隐藏到托盘
  - [x] 点击窗口最小化按钮保持正常最小化行为
  - [x] 正确处理程序退出逻辑

## 快捷键功能
- [x] 使用 Windows API 注册全局快捷键 默认为 ctrl + alt + A，快捷键的作用是显示主窗口
- [x] 快捷键能够自定义进行修改，可以添加在API KEY设置界面
- [x] 快捷键功能与托盘图标点击行为保持一致（切换窗口显示/隐藏）

## 测试与调试
- [x] 测试每个功能模块的独立性
- [x] 功能测试
  - [x] API Key 管理功能
    - [x] 保存功能
    - [x] 测试功能
    - [x] 错误处理
  - [x] 主题切换功能
    - [x] 切换效果
    - [x] 持久化存储
    - [x] 所有元素适配
  - [x] 快捷键功能
    - [x] 注册/注销
    - [x] 自定义修改
  - [x] 窗口控制功能
    - [x] 最小化/最大化/关闭
    - [x] 托盘图标
    - [x] 显示/隐藏切换
  - [x] 聊天功能
    - [x] 消息发送/接收
    - [x] 流式输出
    - [x] 停止功能
    - [x] 历史记录
    - [x] Markdown 渲染
    - [x] 代码高亮
    - [x] 链接处理
- [x] 稳定性测试
  - [x] 长时间运行测试
  - [x] 内存占用监控
  - [x] 错误处理和恢复
  - [x] 异常情况处理
- [x] 性能优化
  - [x] 启动速度优化
  - [x] 响应速度优化
  - [x] 资源占用优化
- [x] 用户体验测试
  - [x] 界面流畅度
  - [x] 操作反馈
  - [x] 动画效果
  - [x] 主题切换
- [x] 错误修复
  - [x] API 调用错误处理
  - [x] 配置文件读写错误处理
  - [x] 窗口状态错误处理
  - [x] 快捷键冲突处理
  - [x] 界面布局错误修复
- [x] 开发工具配置
  - [x] 热重载功能
  - [x] 开发环境配置
  - [x] 调试工具集成

## 文档与发布
- [ ] 编写用户手册或使用指南
- [ ] 准备发布版本
- [ ] 部署和发布应用程序
- [x] 准备发布版本
  - [x] 优化打包配置
    - [x] 移除开发依赖
    - [x] 精简依赖包
    - [x] 配置打包选项
  - [x] 资源优化
    - [x] 压缩图片资源
    - [x] 移除未使用文件
    - [x] 精简代码文件
  - [x] 应用程序配置
    - [x] 设置应用图标
    - [x] 配置应用信息
    - [x] 版本号管理
- [x] 打包与发布
  - [x] Windows 平台打包
    - [x] 生成安装包
    - [x] 创建便携版
    - [x] 签名验证
  - [x] 发布准备
    - [x] 编写发布说明
    - [x] 准备下载页面
    - [x] 版本更新机制

## 后续计划
- [ ] 收集用户反馈
- [ ] 计划未来的功能更新和改进 